{% extends "base.html" %}

{% block scripts %}
{{super()}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.7.6/showdown.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/pbkdf2.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/mode-cfb.js"></script>

<link href="{{ url_for('static', filename='css/animation.css') }}" rel="stylesheet">
<script src="{{ url_for('static', filename='helpers/showdown_converter.js') }}"></script>
<script src="{{ url_for('static', filename='services/history.js') }}"></script>
<script src="{{ url_for('static', filename='services/utils.js') }}"></script>
<script src="{{ url_for('static', filename='services/graph.js') }}"></script>
<script src="{{ url_for('static', filename='controllers/homepage.js') }}"></script>
{% endblock %}

{% block body_attribs %}
ng-controller="mdBurst-api-controller"
{% endblock %}

{% block content %}
{{super()}}
<div class="post_content" ng-cloak> <!-- If Needed Left and Right Padding in 'md' and 'lg' screen means use container class -->
              <div id="accordion" class="accordion">
                    <div ng-repeat="post in posts">
                      <div
                        ng-click    = "getPayloadMD(post.uid, 'collapse-' + $index, $index)"
                        class       = "border-dark mdcell"
                        data-toggle = "collapse"
                        data-target = {% raw %} "{{ '#collapse-' + $index }}" {% endraw %}
                        data-parent = "#accordion">
                        <div class="row">
                            <div class="col-xs-2 col-xm-2 circle">
                              <img  src="http://www.iptheologie.fr/wp-content/uploads/2016/04/picto-learn.png" alt="Mountain View">
                            </div>
                            <div class="col-xs-6 col-xm-6 post_title">
                                <h3>{{ "{{ post.name }}" }}</h3>

                              <span ng-show="getPayloadMD_tag == 'collapse-' + $index">
                                  <i class="glyphicon glyphicon-refresh spinning"></i>
                              </span>
                            </div>
                            <div class="col-xs-4 col-xm-4">
                              <h6> {{ "{{ post.date }}" }}  </h6>
                              <h6> {{ "{{ post.owner }}" }} </h6>
                            </div>
                        </div> <!-- row -->
                      </div>
                      <div id={% raw %} "{{ 'collapse-' + $index }}" {% endraw %} class="collapse">
                        <div ng-bind-html="post.payload"> </div>
                      </div>
                    </div> <!-- endfor -->
              </div> <!-- accordion -->

      <ul id="pagination_autorefresh" class="pagination">
          <li ng-repeat="x in [].constructor(page_iterator.max_iteration) track by $index">
            <a href={% raw %} "{{'#' + ($index + 1)}}" {% endraw %}>{{ "{{ $index + 1 }}" }}</a>
          </li>
      </ul> <!-- pagination -->
      <div id="pagination_loader">
      </div> <!-- pagination_loader -->
</div> <!-- container -->
{% endblock %}
